const defaultOptions={baseLayers:null,overLayers:null,opacityControl:!1,};class OpacityControl{constructor(options){this._baseLayersOption=options.baseLayers||defaultOptions.baseLayers;this._overLayersOption=options.overLayers||defaultOptions.overLayers;this._opacityControlOption=options.opacityControl||defaultOptions.opacityControl} _radioButtonControlAdd(layerId){const initLayer=Object.keys(this._baseLayersOption)[0];const radioButton=document.createElement('input');radioButton.setAttribute('type','radio');radioButton.id=layerId;if(layerId===initLayer){radioButton.checked=!0;this._map.setLayoutProperty(layerId,'visibility','visible')}else{this._map.setLayoutProperty(layerId,'visibility','none')} this._container.appendChild(radioButton);radioButton.addEventListener('change',(event)=>{event.target.checked=!0;this._map.setLayoutProperty(layerId,'visibility','visible');Object.keys(this._baseLayersOption).map((layer)=>{if(layer!==event.target.id){document.getElementById(layer).checked=!1;this._map.setLayoutProperty(layer,'visibility','none')}})});const layerName=document.createElement('span');layerName.appendChild(document.createTextNode(this._baseLayersOption[layerId]));this._container.appendChild(layerName)} _checkBoxControlAdd(layerId){const checkBox=document.createElement('input');checkBox.setAttribute('type','checkbox');checkBox.id=layerId;this._map.setLayoutProperty(layerId,'visibility','none');this._container.appendChild(checkBox);checkBox.addEventListener('change',(event)=>{if(event.target.checked){this._map.setLayoutProperty(layerId,'visibility','visible')}else{this._map.setLayoutProperty(layerId,'visibility','none')}});const layerName=document.createElement('span');layerName.appendChild(document.createTextNode(this._overLayersOption[layerId]));this._container.appendChild(layerName)} _rangeControlAdd(layerId){const range=document.createElement('input');range.type='range';range.min=0;range.max=100;range.value=100;this._container.appendChild(range);range.addEventListener('input',(event)=>{this._map.setPaintProperty(layerId,'raster-opacity',Number(event.target.value/100))})} _opacityControlAdd(){this._container=document.createElement('div');this._container.className='mapboxgl-ctrl mapboxgl-ctrl-group';this._container.id='opacity-control';if(this._baseLayersOption){Object.keys(this._baseLayersOption).map((layer)=>{const layerId=layer;const br=document.createElement('br');this._radioButtonControlAdd(layerId);this._container.appendChild(br)})} if(this._baseLayersOption&&this._overLayersOption){const hr=document.createElement('hr');this._container.appendChild(hr)} if(this._overLayersOption){Object.keys(this._overLayersOption).map((layer)=>{const layerId=layer;const br=document.createElement('br');this._checkBoxControlAdd(layerId);this._container.appendChild(br);if(this._opacityControlOption){this._rangeControlAdd(layerId);this._container.appendChild(br)}})}} onAdd(map){this._map=map;this._opacityControlAdd();return this._container} onRemove(){this._container.parentNode.removeChild(this._container);this._map=null}} export default OpacityControl